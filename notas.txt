usar _xadd para hacer el incremento a decremento de manera atomica
xadd no es atomica pero al poner el lock se hace atomico

_xadd: 
    mov rax, rdi
    lock xadd [rsi], eax
    ret

retorna el valor antiguo del semaforo

POSIBLE IMPLEMENTACION:

void sem_wait(sem * s) {
    while(_xadd(-1, &(s->value)) <= 0)
        _xadd(1, &(s->value));
}

void sem_post(sem * s) {
    _xadd(1, &(s->value));
}



_xchg: 
    mov rax, rsi
    xchg [rdi], eax     // ya es atomica
    ret

retorna el valor del lock

min 57 empieza con pipes


p1 | p2

printf() --> p2

write(0, string, cant)

fd[0] = 0 // pantalla

fd[0] = &pipe --> index + 1

fd[1] = 0 // pantalla

fd[1] = &pipe --> index + 1

fd[0] = -1 --> closed
fd[1] = -1 --> closed